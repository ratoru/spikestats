{"ast":null,"code":"var _jsxFileName = \"/Users/raphael/programming/web-projects/roundnet-stats/components/GroupList.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport List from \"@material-ui/core/List\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Fab from \"@material-ui/core/Fab\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport GroupAddRoundedIcon from \"@material-ui/icons/GroupAddRounded\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Swal from \"sweetalert2\";\nimport { GroupListItem } from \"./common/GroupListItem\";\n\nconst handleRenamePlayer = (groupname, oldPlayer, newPlayer) => {\n  console.log(\"Rename this player\", groupname, oldPlayer, newPlayer);\n};\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: \"100vw\",\n    // maxWidth: 360,\n    backgroundColor: theme.palette.background.paper\n  },\n  fab: {\n    position: \"fixed\",\n    bottom: theme.spacing(4),\n    backgroundColor: theme.palette.success.main\n  }\n}));\nexport const GroupList = () => {\n  // Use style\n  const classes = useStyles(); // Use state hook\n\n  const {\n    0: groups,\n    1: setGroups\n  } = useState([]); // Add a group\n\n  const handleAdd = async () => {\n    let newGroup = {\n      groupname: \"\",\n      players: []\n    }; // Template for adding players.\n\n    const PlayerSwal = Swal.mixin({\n      icon: \"question\",\n      showCancelButton: true,\n      confirmButtonText: \"Next &rarr;\",\n      footer: \"Leave box empty to stop adding players.\",\n      input: \"text\",\n      inputPlaceholder: \"New Name\",\n      inputValidator: value => {\n        for (let player of newGroup.players) {\n          if (player === value) {\n            return \"Name is not unique!\";\n          }\n        }\n      },\n      progressSteps: [\"1\", \"2\", \"3\"],\n      currentProgressStep: \"1\"\n    }); // Ask for new group name.\n\n    const {\n      value: newGroupname\n    } = await Swal.fire({\n      title: \"New Group Name\",\n      text: \"Must be a unique group name.\",\n      icon: \"question\",\n      showCancelButton: true,\n      confirmButtonText: \"Next &rarr;\",\n      input: \"text\",\n      inputPlaceholder: \"New group name\",\n      inputValidator: value => {\n        if (!value) {\n          return \"Enter a name.\";\n        }\n\n        for (let group of groups) {\n          if (group.groupname === value) {\n            return \"Name is not unique!\";\n          }\n        }\n      },\n      progressSteps: [\"1\", \"2\", \"3\"],\n      currentProgressStep: \"0\"\n    });\n\n    if (!newGroupname) {\n      return;\n    }\n\n    newGroup.groupname = `${newGroupname}`; // Add Players until \"\" is returned.\n\n    let {\n      value: newPlayer,\n      dismiss: reason\n    } = await PlayerSwal.fire({\n      title: `Add Player #${newGroup.players.length + 1}`,\n      text: `So far you have: ${newGroup.players.join(\", \")}`\n    });\n\n    if (reason) {\n      return;\n    }\n\n    while (newPlayer) {\n      newGroup.players.push(`${newPlayer}`);\n      const {\n        value: temp,\n        dismiss: curReason\n      } = await PlayerSwal.fire({\n        title: `Add Player #${newGroup.players.length + 1}`,\n        text: `So far you have: ${newGroup.players.join(\", \")}`\n      });\n\n      if (curReason) {\n        return;\n      }\n\n      newPlayer = temp;\n    }\n\n    Swal.fire({\n      title: `Group: ${newGroup.groupname}`,\n      text: `Players: ${newGroup.players.join(\", \")}`,\n      icon: \"success\",\n      confirmButtonText: \"Finish\",\n      showCancelButton: true,\n      progressSteps: [\"1\", \"2\", \"3\"],\n      currentProgressStep: \"2\",\n      preConfirm: () => {\n        // If everything went well.\n        if (newGroup.groupname !== \"\" && newGroup.players.length >= 4) {\n          setGroups(groups => [...groups, newGroup]); // Call server here.\n        } else {\n          Swal.fire({\n            title: \"Something went wrong.\",\n            text: \"Remember: You need at least four players.\",\n            icon: \"error\"\n          });\n        }\n      }\n    });\n  }; // Template for error messages.\n\n\n  const errorToast = Swal.mixin({\n    title: \"Something went wrong!\",\n    icon: \"error\",\n    toast: true,\n    position: \"center\",\n    showConfirmButton: false,\n    timer: 4000,\n    timerProgressBar: true\n  }); // Delete a group\n\n  const handleDelete = groupname => {\n    Swal.fire({\n      title: \"Are you sure?\",\n      text: `You won't be able to revert deleting ${groupname}!`,\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonText: \"Yes, delete it!\",\n      focusConfirm: false,\n      focusCancel: true,\n      cancelButtonText: \"No, cancel!\"\n    }).then(result => {\n      if (result.value) {\n        // Save old state\n        const prevGroups = [...groups]; // Update UI.\n\n        setGroups(groups.filter(curGroup => curGroup.groupname !== groupname));\n        console.log(\",Handle delete.\", groupname, groups); // Call backend and revert if error.\n\n        const apiSuccess = true;\n\n        if (!apiSuccess) {\n          errorToast.fire({\n            text: \"The group was already deleted.\"\n          });\n          setGroups(prevGroups);\n        }\n      }\n    });\n  }; // Rename a group\n\n\n  const handleRenameGroup = (oldName, newName) => {\n    // New name can't be the old name.\n    const newGroups = [];\n\n    for (let curGroup of groups) {\n      const curName = curGroup.groupname; // Check if the name is unique.\n\n      if (newName === curName) {\n        errorToast.fire({\n          text: \"Group name is not unique!\"\n        });\n        return;\n      }\n\n      if (curName === oldName) {\n        // Modify old name.\n        newGroups.push({\n          groupname: newName,\n          players: curGroup.players\n        });\n      } else {\n        newGroups.push(curGroup);\n      }\n    }\n\n    setGroups(newGroups); // Call server here.\n  };\n\n  let content;\n\n  if (groups.length == 0) {\n    content = __jsx(Typography, {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 7\n      }\n    }, \"Seems like you have no groups yet. Create one by clicking the button below.\");\n  } else {\n    content = __jsx(List, {\n      component: \"nav\",\n      className: classes.root,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 7\n      }\n    }, groups.map(group => {\n      return __jsx(GroupListItem, {\n        key: group.groupname,\n        group: group,\n        onDelete: handleDelete,\n        onRenameGroup: handleRenameGroup,\n        onRenamePlayer: handleRenamePlayer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }\n      });\n    }));\n  }\n\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 5\n    }\n  }, content, __jsx(Grid, {\n    container: true,\n    spacing: 0,\n    justify: \"center\",\n    style: {\n      minWidth: \"100vw\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }\n  }, __jsx(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 9\n    }\n  }, __jsx(Tooltip, {\n    title: \"New Group\",\n    arrow: true,\n    placement: \"top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 11\n    }\n  }, __jsx(Fab, {\n    size: \"large\",\n    className: classes.fab,\n    \"aria-label\": \"add\",\n    onClick: handleAdd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 13\n    }\n  }, __jsx(GroupAddRoundedIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 15\n    }\n  }))))));\n};","map":{"version":3,"sources":["/Users/raphael/programming/web-projects/roundnet-stats/components/GroupList.tsx"],"names":["React","useState","List","Grid","Fab","Tooltip","GroupAddRoundedIcon","Typography","makeStyles","Swal","GroupListItem","handleRenamePlayer","groupname","oldPlayer","newPlayer","console","log","useStyles","theme","root","width","backgroundColor","palette","background","paper","fab","position","bottom","spacing","success","main","GroupList","classes","groups","setGroups","handleAdd","newGroup","players","PlayerSwal","mixin","icon","showCancelButton","confirmButtonText","footer","input","inputPlaceholder","inputValidator","value","player","progressSteps","currentProgressStep","newGroupname","fire","title","text","group","dismiss","reason","length","join","push","temp","curReason","preConfirm","errorToast","toast","showConfirmButton","timer","timerProgressBar","handleDelete","focusConfirm","focusCancel","cancelButtonText","then","result","prevGroups","filter","curGroup","apiSuccess","handleRenameGroup","oldName","newName","newGroups","curName","content","map","minWidth"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport List from \"@material-ui/core/List\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Fab from \"@material-ui/core/Fab\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport GroupAddRoundedIcon from \"@material-ui/icons/GroupAddRounded\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Swal from \"sweetalert2\";\nimport { GroupListItem } from \"./common/GroupListItem\";\n\nconst handleRenamePlayer = (\n  groupname: string,\n  oldPlayer: string,\n  newPlayer: string\n) => {\n  console.log(\"Rename this player\", groupname, oldPlayer, newPlayer);\n};\n\nexport interface Group {\n  groupname: string;\n  players: string[];\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100vw\",\n    // maxWidth: 360,\n    backgroundColor: theme.palette.background.paper,\n  },\n  fab: {\n    position: \"fixed\",\n    bottom: theme.spacing(4),\n    backgroundColor: theme.palette.success.main,\n  },\n}));\n\nexport const GroupList: React.FC = () => {\n  // Use style\n  const classes = useStyles();\n\n  // Use state hook\n  const [groups, setGroups] = useState([]);\n\n  // Add a group\n  const handleAdd = async () => {\n    let newGroup: Group = {\n      groupname: \"\",\n      players: [],\n    };\n\n    // Template for adding players.\n    const PlayerSwal = Swal.mixin({\n      icon: \"question\",\n      showCancelButton: true,\n      confirmButtonText: \"Next &rarr;\",\n      footer: \"Leave box empty to stop adding players.\",\n      input: \"text\",\n      inputPlaceholder: \"New Name\",\n      inputValidator: (value) => {\n        for (let player of newGroup.players) {\n          if (player === value) {\n            return \"Name is not unique!\";\n          }\n        }\n      },\n      progressSteps: [\"1\", \"2\", \"3\"],\n      currentProgressStep: \"1\",\n    });\n\n    // Ask for new group name.\n    const { value: newGroupname } = await Swal.fire({\n      title: \"New Group Name\",\n      text: \"Must be a unique group name.\",\n      icon: \"question\",\n      showCancelButton: true,\n      confirmButtonText: \"Next &rarr;\",\n      input: \"text\",\n      inputPlaceholder: \"New group name\",\n      inputValidator: (value) => {\n        if (!value) {\n          return \"Enter a name.\";\n        }\n        for (let group of groups) {\n          if (group.groupname === value) {\n            return \"Name is not unique!\";\n          }\n        }\n      },\n      progressSteps: [\"1\", \"2\", \"3\"],\n      currentProgressStep: \"0\",\n    });\n    if (!newGroupname) {\n      return;\n    }\n    newGroup.groupname = `${newGroupname}`;\n\n    // Add Players until \"\" is returned.\n    let { value: newPlayer, dismiss: reason } = await PlayerSwal.fire({\n      title: `Add Player #${newGroup.players.length + 1}`,\n      text: `So far you have: ${newGroup.players.join(\", \")}`,\n    });\n    if (reason) {\n      return;\n    }\n    while (newPlayer) {\n      newGroup.players.push(`${newPlayer}`);\n      const { value: temp, dismiss: curReason } = await PlayerSwal.fire({\n        title: `Add Player #${newGroup.players.length + 1}`,\n        text: `So far you have: ${newGroup.players.join(\", \")}`,\n      });\n      if (curReason) {\n        return;\n      }\n      newPlayer = temp;\n    }\n\n    Swal.fire({\n      title: `Group: ${newGroup.groupname}`,\n      text: `Players: ${newGroup.players.join(\", \")}`,\n      icon: \"success\",\n      confirmButtonText: \"Finish\",\n      showCancelButton: true,\n      progressSteps: [\"1\", \"2\", \"3\"],\n      currentProgressStep: \"2\",\n      preConfirm: () => {\n        // If everything went well.\n        if (newGroup.groupname !== \"\" && newGroup.players.length >= 4) {\n          setGroups((groups) => [...groups, newGroup]);\n          // Call server here.\n        } else {\n          Swal.fire({\n            title: \"Something went wrong.\",\n            text: \"Remember: You need at least four players.\",\n            icon: \"error\",\n          });\n        }\n      },\n    });\n  };\n\n  // Template for error messages.\n  const errorToast = Swal.mixin({\n    title: \"Something went wrong!\",\n    icon: \"error\",\n    toast: true,\n    position: \"center\",\n    showConfirmButton: false,\n    timer: 4000,\n    timerProgressBar: true,\n  });\n\n  // Delete a group\n  const handleDelete = (groupname: string) => {\n    Swal.fire({\n      title: \"Are you sure?\",\n      text: `You won't be able to revert deleting ${groupname}!`,\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonText: \"Yes, delete it!\",\n      focusConfirm: false,\n      focusCancel: true,\n      cancelButtonText: \"No, cancel!\",\n    }).then((result) => {\n      if (result.value) {\n        // Save old state\n        const prevGroups = [...groups];\n        // Update UI.\n        setGroups(\n          groups.filter((curGroup) => curGroup.groupname !== groupname)\n        );\n        console.log(\",Handle delete.\", groupname, groups);\n        // Call backend and revert if error.\n        const apiSuccess = true;\n        if (!apiSuccess) {\n          errorToast.fire({ text: \"The group was already deleted.\" });\n          setGroups(prevGroups);\n        }\n      }\n    });\n  };\n\n  // Rename a group\n  const handleRenameGroup = (oldName: string, newName: string) => {\n    // New name can't be the old name.\n\n    const newGroups: Group[] = [];\n    for (let curGroup of groups) {\n      const curName = curGroup.groupname;\n      // Check if the name is unique.\n      if (newName === curName) {\n        errorToast.fire({ text: \"Group name is not unique!\" });\n        return;\n      }\n      if (curName === oldName) {\n        // Modify old name.\n        newGroups.push({ groupname: newName, players: curGroup.players });\n      } else {\n        newGroups.push(curGroup);\n      }\n    }\n    setGroups(newGroups);\n    // Call server here.\n  };\n\n  let content: React.ReactNode;\n  if (groups.length == 0) {\n    content = (\n      <Typography align=\"center\">\n        Seems like you have no groups yet. Create one by clicking the button\n        below.\n      </Typography>\n    );\n  } else {\n    content = (\n      <List component=\"nav\" className={classes.root}>\n        {groups.map((group) => {\n          return (\n            <GroupListItem\n              key={group.groupname}\n              group={group}\n              onDelete={handleDelete}\n              onRenameGroup={handleRenameGroup}\n              onRenamePlayer={handleRenamePlayer}\n            />\n          );\n        })}\n      </List>\n    );\n  }\n  return (\n    <React.Fragment>\n      {content}\n      <Grid\n        container\n        spacing={0}\n        justify=\"center\"\n        style={{ minWidth: \"100vw\" }}\n      >\n        <Grid item>\n          <Tooltip title=\"New Group\" arrow placement=\"top\">\n            <Fab\n              size=\"large\"\n              className={classes.fab}\n              aria-label=\"add\"\n              onClick={handleAdd}\n            >\n              <GroupAddRoundedIcon />\n            </Fab>\n          </Tooltip>\n        </Grid>\n      </Grid>\n    </React.Fragment>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}